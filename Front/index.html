<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fraud Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow p-4">
        <h2 class="mb-4">Fraud Detection using Random Forest</h2>
        <form id="predictForm">
            <div class="mb-3">
                <label for="distance_from_home" class="form-label">Distance from Home in KM</label>
                <input type="number" step="any" class="form-control" id="distance_from_home" required>
            </div>
            <div class="mb-3">
                <label for="distance_from_last_transaction" class="form-label">Distance from Last Transaction in KM</label>
                <input type="number" step="any" class="form-control" id="distance_from_last_transaction" required>
            </div>
            <div class="mb-3">
                <label for="ratio_to_median_purchase_price" class="form-label">Ratio to Median Purchase Price</label>
                <input type="number" step="any" class="form-control" id="ratio_to_median_purchase_price" required>
            </div>
            <div class="mb-3">
                <label for="repeat_retailer" class="form-label">Repeat Retailer (1 = Yes, 0 = No)</label>
                <input type="number" class="form-control" id="repeat_retailer" min="0" max="1" required>
            </div>
            <div class="mb-3">
                <label for="used_chip" class="form-label">Used Chip (1 = Yes, 0 = No)</label>
                <input type="number" class="form-control" id="used_chip" min="0" max="1" required>
            </div>
            <div class="mb-3">
                <label for="used_pin_number" class="form-label">Used PIN Number (1 = Yes, 0 = No)</label>
                <input type="number" class="form-control" id="used_pin_number" min="0" max="1" required>
            </div>
            <div class="mb-3">
                <label for="online_order" class="form-label">Online Order (1 = Yes, 0 = No)</label>
                <input type="number" class="form-control" id="online_order" min="0" max="1" required>
            </div>
            <button type="button" onclick="sendData()" class="btn btn-primary">Predict</button>
        </form>
        <p id="output" class="mt-3 fw-bold"></p>
    </div>
</div>

<script>
    async function sendData() {
        const features = [
            parseFloat(document.getElementById("distance_from_home").value),
            parseFloat(document.getElementById("distance_from_last_transaction").value),
            parseFloat(document.getElementById("ratio_to_median_purchase_price").value),
            parseFloat(document.getElementById("repeat_retailer").value),
            parseFloat(document.getElementById("used_chip").value),
            parseFloat(document.getElementById("used_pin_number").value),
            parseFloat(document.getElementById("online_order").value)
        ];

        const res = await fetch("/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ features })
        });

        const result = await res.json();
        document.getElementById("output").innerText = "Prediction: " + result.prediction;
    }
</script>
</body>
</html>
